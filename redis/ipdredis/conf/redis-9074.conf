# Bao gồm cấu hình chung
include /redis/ipdredis/redis-common.conf
# Cổng TCP lắng nghe
port 9074
# Bộ nhớ tối đa có thể sử dụng
maxmemory 1000m
# Chiến lược loại bỏ dữ liệu khi cạn kiệt bộ nhớ:
# volatile-lru -> loại bỏ khóa có thiết lập thời gian hết hạn theo thuật toán LRU
# allkeys-lru -> loại bỏ bất kỳ khóa nào theo thuật toán LRU
# volatile-random -> loại bỏ ngẫu nhiên một khóa có thiết lập thời gian hết hạn
# allkeys-random -> loại bỏ ngẫu nhiên bất kỳ khóa nào
# volatile-ttl -> loại bỏ khóa có thời gian hết hạn gần nhất (TTL nhỏ nhất)
# noeviction -> không cho hết hạn, chỉ trả về lỗi khi thực hiện các thao tác ghi
maxmemory-policy allkeys-lru
# Tên tệp lưu trữ AOF
appendfilename "appendonly-9074.aof"
# Không bật lưu trữ RDB, chỉ sử dụng cho quá trình thêm slave
dbfilename dump-9074.rdb
# Tệp cấu hình Cluster (tự động tạo khi khởi chạy)
cluster-config-file nodes-9074.conf
# Với các thực thể Redis triển khai trên cùng một máy, hãy giãn cách auto-aof-rewrite 
# vì trong môi trường Cluster, việc chiếm dụng bộ nhớ cơ bản là giống nhau.
# Điều này nhằm ngăn chặn việc tất cả các tiến trình Redis trên cùng một máy thực hiện 
# fork đồng thời để rewrite AOF, gây chiếm dụng lượng lớn bộ nhớ (Lưu ý: Cluster bắt buộc phải bật AOF)
auto-aof-rewrite-percentage 80-100
