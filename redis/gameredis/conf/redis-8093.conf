# Bao gồm cấu hình chung
include redis-common.conf
# Cổng TCP lắng nghe
port 8093
# Bộ nhớ tối đa có thể sử dụng
maxmemory 1000m
# Chiến lược loại bỏ dữ liệu khi cạn kiệt bộ nhớ:
# volatile-lru -> remove the key with an expire set using an LRU algorithm
# allkeys-lru -> remove any key accordingly to the LRU algorithm
# volatile-random -> remove a random key with an expire set
# allkeys-random -> remove a random key, any key
# volatile-ttl -> remove the key with the nearest expire time (minor TTL)
# noeviction -> don't expire at all, just return an error on write operations
maxmemory-policy allkeys-lru
# Tên tệp lưu trữ AOF
appendfilename "appendonly-8093.aof"
# Không bật lưu trữ RDB, chỉ sử dụng cho quá trình thêm slave
dbfilename dump-8093.rdb
# Tệp cấu hình Cluster (tự động tạo khi khởi chạy)
cluster-config-file nodes-8093.conf
# Với các thực thể Redis triển khai trên cùng một máy, hãy giãn cách auto-aof-rewrite 
# vì trong môi trường Cluster, việc chiếm dụng bộ nhớ cơ bản là giống nhau.
# Điều này nhằm ngăn chặn việc tất cả các tiến trình Redis trên cùng một máy thực hiện 
# fork đồng thời để rewrite AOF, gây chiếm dụng lượng lớn bộ nhớ (Lưu ý: Cluster bắt buộc phải bật AOF).
auto-aof-rewrite-percentage 80-100
